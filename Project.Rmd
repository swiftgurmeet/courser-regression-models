---
title: "Regression Models - Course Project"
author: "Gurmeet Singh"
date: "`r format(Sys.time(), '%d %B, %Y')`"
html_document:
keep_md: yes
---



## Executive Summary
This report attempts to answer the question "Is a car with automatic transmission perform better on MPG compared to a manual one?" Although a simpler analysis might point to a "Yes," further analysis shows that __*there is no significant effect of presence or absence of an automatic transmission on the MPG of a car*__ withing the ```mtcars``` dataset. The average MPG of cars with automatic and manual transmissions is indeed significantly different but the difference is explained by the fact that cars with manual transmission in the dataset get lower MPG presumably due to them being heavier and not because they have manual transmissions. 

Let's plot the MPG of the cars as function of their weight with manual (am=0) and auto (am=1) transmissions: 
```{r libraries,message=F, warning=F}
#The warnings/messages from this section are hidden
library(ggplot2)
ggplot(data=mtcars,aes(mpg,wt)) + geom_point() + facet_grid(facets = am ~ .) + geom_smooth()
```

Looks like the cars with automatic transmission have higher MPG, but they also weigh less on an average.

Let's calculate the mean MPG and weight of manual and auto cars:
``` {r data.exploration}
manualcars <- mtcars[mtcars$am == 0,]
autocars <- mtcars[mtcars$am == 1,]
#Mean MPG/Weight of cars with manual transmission
mean(manualcars$mpg)
mean(manualcars$wt)
#Mean MPG/Weight of cars with automatic transmission
mean(autocars$mpg)
mean(autocars$wt)
```

Clearly, this confirms that the cars with automatic transmission have significantly higher MPG, but they also weigh less on an average.


We can quantify the MPG data with a t-test:
```{r}
t.test(manualcars$mpg,autocars$mpg,var.equal = T)
```

The difference is significant with > 95% confidence since the p-value 0.000285 < 0.05.

Now let's fit a linear model between 'am' as the predictor and 'mpg' as the outcome.

```{r}
fit <- lm(mpg ~ am,data=mtcars)
summary(fit)
```

We can see that there is a significant relationship between the two (am and mpg) indicated by the '***'. The estimate column confirms the MPG means we computed earlier for cars with manual and automatic transmissions. Also, the p-value for 'am' matches the p-value we obtained earlier with the p-test.




The R^2 value indicates that about 33.3% of the variance in MPG is explained by the 'am' variable, so let's fit models with more predictors and use ANOVA to quantify if addition of these predictors improve the model accuracy.
```{r}
fit1 <- lm(formula = mpg ~ am, data = mtcars)
fit2 <- lm(formula = mpg ~ am + wt, data = mtcars)
fit3 <- lm(formula = mpg ~ am + wt + cyl, data = mtcars)
fit4 <- lm(formula = mpg ~ am + wt + cyl + hp, data = mtcars)
anova(fit1,fit2,fit3,fit4)
```

## Results


\pagebreak

## Appendix

### Content Creation
The content of this report is authored in RStudio using R Markdown format and converted to PDF format using the **knitr** package. The R Markdown file itself can be found on [GitHub](https://github.com/swiftgurmeet/courser-regression-models-course-project)

The report can be generated by copying the "Project.Rmd" file into the
working directory of an R session and running these commands:

```
library(knitr)
knit2html("Project.Rmd")
```


Plotting the fitted model.
```{r}
par(mfrow=c(2,2))
plot(fit)
title("Figure A1",outer=T,line=-1)
```

### Notes:

